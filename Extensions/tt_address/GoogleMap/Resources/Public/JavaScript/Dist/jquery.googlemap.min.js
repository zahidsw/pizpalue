function initMap(){var t=document.createEvent("Event");t.initEvent("buepro.ttaddress.googlemap",!0,!0),window.dispatchEvent(t)}!function(p,t,i,n){var s="ppAddressGoogleMap",a={addresses:null,lat:46.829,lng:8.241,zoom:8};function o(t,i){this.element=t,this.options=p.extend({},a,i),this._defaults=a,this._name=s,this.map=null,this.$template=null,this.init()}o.prototype.init=function(){this._initMap(),this._initTemplate(),this._initAddresses(),this._addAddresses()},o.prototype._initMap=function(){if(!this.map){var t={lat:this.options.lat,lng:this.options.lng};this.map=new google.maps.Map(this.element,{zoom:this.options.zoom,center:t})}},o.prototype._initTemplate=function(){this.$template||(this.$template=p(this.element).siblings(".pp-ttaddress-maptemplate"))},o.prototype._initAddresses=function(){var t=this.options.addresses;if(t[0].image){var i,a,e=p(this.element).siblings(".pp-ttaddress-mapdata");for(i in t)a=p('[data-pp-amd-uid="'+t[i].uid+'"]',e),t[i].image=a.attr("data-pp-amd-imageuri"),t[i].uri=a.attr("data-pp-amd-uri")}},o.prototype._addMarker=function(t,i,a,e){var n=new google.maps.InfoWindow({content:a}),s=new google.maps.Marker({position:i,map:this.map,title:t});s.addressUid=e,s.addListener("click",p.proxy(function(){n.open(this.map,s),setTimeout(function(){var t=p('[data-pp-amt-uid="'+s.addressUid+'"] img');t.attr("src",t.attr("data-pp-amt"))},50)},this))},o.prototype._addAddresses=function(){var t,i,a=this.options.addresses;for(i in a)t=a[i],this._addMarker(this._getTitle(t),{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},this._getContent(t),t.uid)},o.prototype._getTitle=function(t){return t[p(this.$template).attr("data-pp-amt-markertitle")]},o.prototype._getContent=function(t){var i,a=this.$template.clone().css("display","block");for(i in p(".pp-amt-wrap",a).attr("data-pp-amt-uid",t.uid),t.image&&p(".pp-amt-image",a).attr("data-pp-amt",t.image),t){var e=p('[data-pp-amt="'+i+'"]',a);if(e.html()||e.html(t[i]),"#"===e.attr("href")&&(e.attr("href",t[i]),"email"===i&&e.attr("href","mailto:"+t[i]),"www"===i)){var n=t[i];-1===n.indexOf("http")&&(n="https://"+n),e.attr("href",n)}}return a.html()},p.fn[s]=function(i){var a,e=arguments;return i===n||"object"==typeof i?this.each(function(){p.data(this,"plugin_"+s)||p.data(this,"plugin_"+s,new o(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?(this.each(function(){var t=p.data(this,"plugin_"+s);t instanceof o&&"function"==typeof t[i]&&(a=t[i].apply(t,Array.prototype.slice.call(e,1))),"destroy"===i&&p.data(this,"plugin_"+s,null)}),a!==n?a:this):void 0}}(jQuery,window,document);